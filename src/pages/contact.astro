---
import Layout from '@layouts/Layout.astro'
import heroImage from '@assets/images/contact.jpg'
import { getCollection } from 'astro:content'
import Hero from '@components/sections/Hero.astro'
import SectionWithText from '@components/sections/SectionWithText.astro'
import ContactSectionNew from '@components/sections/ContactSectionNew.astro'
import Testimonial from '@components/Testimonial.astro'

// Get testimonials from content collection
const testimonials = await getCollection('testimonial')

// Get all services from content collection
const allServices = await getCollection('services')
const services = allServices.filter((service) => service.data.featured)
---

<Layout title="Home">
  <Hero
    heroImage={{ src: heroImage, alt: 'Hero background image' }}
    title="Contact Us"
    sectionId="contact-hero"
  />

  <SectionWithText
    badge="Get in Touch Today"
    title="Simple Steps to Your Next Project"
    description="Reaching out is the easiest way to start turning your ideas into reality. Whether it’s a small repair, a fresh coat of paint, or a full renovation, we’re here to listen and help. Every project begins with a conversation—one where your needs, timeline, and budget are understood from the start. With clear communication and a straightforward process, we make it stress-free to get the support you need. Fill out the form below and let us handle the rest with professionalism and care."
    sectionId="get-in-touch-section"
  />

  <ContactSectionNew
    sectionId="contact-section"
    badge="Contact Us"
    title="Let's Talk About Your Needs"
    description="We're just one form away from helping you. Share your project details, and we'll provide fast, friendly, and professional solutions tailored to your home or business."
  />

  <Testimonial
    badgeText="Testimonials"
    title="What Our Clients Say"
    sectionId="testimonials"
    testimonials={testimonials.map((testimonial) => ({
      testimonial: testimonial.data.testimonial,
      name: testimonial.data.name,
      position: testimonial.data.position,
      company: testimonial.data.company,
      avatar: testimonial.data.avatar,
    }))}
  />
</Layout>
