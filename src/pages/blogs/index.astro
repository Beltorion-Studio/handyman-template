---
import Layout from '@layouts/Layout.astro'
import heroImage from '@assets/images/locksmith.jpg'
import { getCollection } from 'astro:content'
import Hero from '@components/sections/Hero.astro'
import FeaturedBlogSection from '@components/sections/FeaturedBlogSection.astro'
import PostsSection from '@components/sections/PostsSection.astro'

// Get blog posts from content collection
const allBlogPosts = await getCollection('blogs')
const blogPosts = allBlogPosts.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
---

<Layout title="Home">
  <Hero
    heroImage={{ src: heroImage, alt: 'Hero background image' }}
    title="Blog"
    sectionId="hero-section"
  />

  <!-- Featured Blog Section Example -->
  <FeaturedBlogSection
    sectionId="featured-blog-section"
    post={blogPosts[0]}
    postType="blog"
    readMoreText="Read more"
  />

  <PostsSection
    posts={blogPosts}
    postType="blog"
    sectionId="blog-posts"
  />
 
</Layout>
