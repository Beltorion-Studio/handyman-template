---
import { z } from 'zod'
import Input from '@components/ui/Input.astro'
import Textarea from '@components/ui/Textarea.astro'
import Select from '@components/ui/Select.astro'
import Checkbox from '@components/ui/Checkbox.astro'
import Button from '@components/ui/Button.astro'

const PropsSchema = z.object({
  formId: z.string(),
  className: z.string().optional(),
})

export type Props = z.infer<typeof PropsSchema>

const { className = '', formId = 'contact-form' } = PropsSchema.parse(Astro.props)

// Service options for the select dropdown
const serviceOptions = [
  { value: 'plumbing', label: 'Plumbing', disabled: false },
  { value: 'electrical', label: 'Electrical', disabled: false },
  { value: 'carpentry', label: 'Carpentry', disabled: false },
  { value: 'painting', label: 'Painting', disabled: false },
  { value: 'hvac', label: 'HVAC', disabled: false },
  { value: 'general', label: 'General Handyman', disabled: false },
  { value: 'emergency', label: 'Emergency Service', disabled: false },
  { value: 'other', label: 'Other', disabled: false },
]
---

<form
  id={formId}
  class={`backdrop-blur backdrop-filter bg-black/25 p-8 rounded-xl flex flex-col gap-4 ${className}`}
  method="POST"
  action="/contact"
  aria-label="Contact form"
>
  <!-- Full Name Field -->
  <div class="w-full">
    <Input
      type="text"
      name="fullName"
      id="fullName"
      label="Full name"
      placeholder="Your full name"
      required={true}
      disabled={false}
    />
  </div>

  <!-- Phone and Email Row -->
  <div class="flex w-full gap-4">
    <div class="flex-1">
      <Input
        type="tel"
        name="phone"
        id="phone"
        label="Phone"
        placeholder="Your phone number"
        required={true}
        disabled={false}
      />
    </div>
    <div class="flex-1">
      <Input
        type="email"
        name="email"
        id="email"
        label="Email"
        placeholder="Your email address"
        required={true}
        disabled={false}
      />
    </div>
  </div>

  <!-- Location Field -->
  <div class="w-full">
    <Input
      type="text"
      name="location"
      id="location"
      label="Location"
      placeholder="Your location"
      required={true}
      disabled={false}
    />
  </div>

  <!-- Service Selection -->
  <div class="w-full">
    <Select
      id="service"
      name="service"
      label="Select service"
      placeholder="Select one..."
      options={serviceOptions}
      required={true}
      disabled={false}
    />
  </div>

  <!-- Message Field -->
  <div class="w-full">
    <Textarea
      name="message"
      id="message"
      label="Message"
      placeholder="Type your message..."
      rows={6}
      required={true}
      disabled={false}
      resize="vertical"
    />
  </div>

  <!-- Terms Checkbox -->
  <div class="pb-4">
    <Checkbox
      name="acceptTerms"
      label="I accept the Terms"
      required={true}
      disabled={false}
      checked={false}
      value="accept"
    />
  </div>

  <!-- Submit Button -->
  <Button
    type="submit"
    intent="secondary"
    size="large"
    borderRadius="corner"
    class="w-full"
    ariaLabel="Submit contact form"
  >
    Submit
  </Button>
</form>
