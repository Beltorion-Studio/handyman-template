---
import { Image } from 'astro:assets'
import { Icon } from 'astro-icon/components'
import Heading from '@components/ui/Heading.astro'
import Link from '@components/ui/Link.astro'
import { projectIcons } from '@config/icons'

export type Props = {
  image: ImageMetadata
  imageAlt: string
  date?: string
  title: string
  description: string
  readMoreText: string
  href: string
}

const { image, imageAlt, date, title, description, readMoreText = 'Read More', href } = Astro.props
---

<div
  class="group relative h-full overflow-hidden rounded-3xl border border-brand bg-white transition-shadow duration-300 hover:shadow-lg"
>
  <!-- Image Section -->
  {
    image && (
      <div class="aspect-[4/3] w-full overflow-hidden">
        <Image
          src={image}
          alt={imageAlt}
          class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
          width={400}
          height={300}
        />
      </div>
    )
  }

  <!-- Content Section -->
  <div class="flex h-full flex-col p-6">
    <!-- Date -->
    {
      date && (
        <div class="mb-3">
          <p class="text-sm font-medium text-text-primary">{date}</p>
        </div>
      )
    }

    <!-- Title -->
    {
      title && (
        <div class="mb-3">
          <Heading
            tag="h3"
            size="h4"
            variant="primary"
            class="line-clamp-2 text-xl leading-tight font-bold"
          >
            {title}
          </Heading>
        </div>
      )
    }

    <!-- Description with 3-line limit -->
    {
      description && (
        <div class="mb-4 flex-1 max-h-20">
          <p class="line-clamp-3 text-base leading-relaxed text-text-primary">{description}</p>
        </div>
      )
    }

    <!-- Read More Link -->
    <div class="text-text-brand">
      <Link
        href={href}
        intent="tertiary"
        class="inline-flex items-center gap-2 text-lg font-semibold"
      >
        <span>{readMoreText}</span>
        <Icon
          name={projectIcons.chevronRight}
          class="h-4 w-4 transition-transform duration-200 group-hover:translate-x-1"
        />
      </Link>
    </div>
  </div>
</div>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }
</style>
