---
import Heading from '@components/ui/Heading.astro'
import TeamCard from '@components/ui/TeamCard.astro'
import Badge from '@components/ui/Badge.astro'

export type Props = {
  badge?: string
  title?: string
  description?: string
  teamMembers?: Array<{
    data: {
      name: string
      status: string
      description: string
      image: ImageMetadata
      imageAlt: string
      featured?: boolean
    }
  }>
  sectionId: string
  maxMembers?: number
  showFeaturedOnly?: boolean
  className?: string
  background?: string
}

const {
  badge = 'Our Team',
  title = 'Skilled Hands, Trusted People',
  description,
  teamMembers = [],
  sectionId = 'team-section',
  maxMembers,
  showFeaturedOnly = false,
  className = '',
  background = 'bg-white',
} = Astro.props

// Filter and limit team members
const filteredMembers = teamMembers
  .filter((member) => (showFeaturedOnly ? member.data.featured : true))
  .slice(0, maxMembers || teamMembers.length)
---

<section class={`py-10 tablet:py-28 ${background} ${className}`} id={sectionId}>
  <div class="container mx-auto">
    <!-- Section Header -->
    <div class="mb-16 text-center">
      {
        badge && (
          <Badge intent="secondary" roundness="sm" size="base" class="mb-6">
            {badge}
          </Badge>
        )
      }
      <Heading tag="h2" size="h2" variant="primary" align="center" class="mb-0">
        {title}
      </Heading>
      {description && <p class="text-text-primary mx-auto mt-6 max-w-2xl text-lg">{description}</p>}
    </div>

    <!-- Team Grid -->
    {
      filteredMembers.length > 0 ? (
        <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
          {filteredMembers.map((member) => (
            <div class="h-full">
              <TeamCard
                image={member.data.image}
                imageAlt={member.data.imageAlt}
                name={member.data.name}
                status={member.data.status}
                description={member.data.description}
              />
            </div>
          ))}
        </div>
      ) : (
        <div class="py-12 text-center">
          <p class="text-text-primary text-lg">No team members available at the moment.</p>
        </div>
      )
    }
  </div>
</section>
